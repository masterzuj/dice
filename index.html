<script src="./jquery-3.7.1.min.js"></script>
<script>
    $(document).ready(function() {
       
    });
</script>



<svg id="vegas" width="400" height="400" viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg">
    <circle cx="110" cy="110" r="100" fill="none" stroke="lightblue" stroke-width="1" />
    <g font-family="Arial" font-size="24" text-anchor="middle" dominant-baseline="middle">
        <image x="100" y="180" width="20" height="20" href="./earth.png" /><!--7 -->
        <image x="45" y="155" width="20" height="20" href="./chip.png" /><!--6 -->
        <image x="20" y="100" width="20" height="20" href="./arrow.png" /><!--5 -->
        <image x="45" y="45" width="20" height="20" href="./cross.png" /><!--4 -->
        <image x="100" y="20" width="20" height="20" href="./earth.png" /><!--3 -->
        <image x="155" y="45" width="20" height="20" href="./chip.png" /><!--2 -->
        <image x="180" y="100" width="20" height="20" href="./arrow.png" /><!--1 -->
        <image x="155" y="155" width="20" height="20" href="./cross.png" /><!--8 -->
    </g>

</svg>

<div style="position: fixed; top: 190px; left: 200px; background-color: green; opacity: 0.3; width: 200px; height: 20px;"></div>


<div id="win" style="position: fixed; top: 160px; left: 180px; background-color: lightblue; opacity: 1; width: 50px; height: 80px; font-size: 80; text-align: center;">1</div>
<script>
    $(document).ready(function() {

        // Rotate the SVG disc
        var svg = $('svg');
        var angle = 0;
        var time = 0;

        function rotateDisc() {
            angle += 5; // Increment the rotation angle by a random number between 1 and 10
            svg.css('transform', 'rotate(' + angle + 'deg)');
            svg.css('transform-origin', '50% 50%'); // Set the rotation origin to the center
        
        
            console.log("Rotation angle: " + angle);

        }


    //$('#startButton').click(function() {
    $('#vegas').click(function() {
        angle = 0; // Reset the angle to 0 when the button is clicked
        svg.css('transform', 'rotate(0deg)'); // Reset the rotation of the SVG
        svg.css('transform-origin', '50% 50%'); // Set the rotation origin to the center

        //clearInterval(intervalId); // Clear any existing intervals to prevent multiple rotations

        var time = Math.floor(Math.random() * 5000);
        
        intervalId = setInterval(rotateDisc, 50); // Start the rotation again
        console.log("Rotation started for " + time + " milliseconds.");
        setTimeout(function() {
            clearInterval(intervalId);
            findTopNumber(angle);
            
        }, time); // Stop the rotation after 3 seconds

        console.log("Rotation stopped after " + time + " milliseconds.");

       
    });

    function findTopNumber(func_angle) {
        var rotation = func_angle % 360; // Get the current rotation angle
        
        console.log("Current rotation angle: " + rotation);
        //if (rotation < 0) rotation += 360; // Ensure the angle is positive

        var number = Math.round(rotation / 45); // Calculate the number based on the angle
        if (number < 0) number += 8; // Ensure the number is positive
        
        console.log("Current rotation angle: " + rotation);

        var numberwin = [
            { number: 1, image: "./arrow.png", href: "./arrow.png" },
            { number: 2, image: "./chip.png", href: "./chip.png" },
            { number: 3, image: "./earth.png", href: "./earth.png" },
            { number: 4, image: "./cross.png", href: "./cross.png" },
            { number: 5, image: "./arrow.png", href: "./arrow.png" },
            { number: 6, image: "./chip.png", href: "./chip.png" },
            { number: 7, image: "./earth.png", href: "./earth.png" },
            { number: 8, image: "./cross.png", href: "./cross.png" },
            { number: 0, image: "", href: "https://zujkov.com/" },
        ];

        var angleToNumberMap = [
            { angle: 0, number: 0 },
            { angle: 5, number: 1 },
            { angle: 10, number: 1 },
            { angle: 15, number: 1 },
            { angle: 20, number: 1 },
            { angle: 25, number: 1 },
            { angle: 30, number: 1 },
            { angle: 35, number: 1 },
            { angle: 40, number: 1 },
            { angle: 45, number: 2 },
            { angle: 50, number: 2 },
            { angle: 55, number: 2 },
            { angle: 60, number: 2 },
            { angle: 65, number: 2 },
            { angle: 70, number: 2 },
            { angle: 75, number: 2 },
            { angle: 80, number: 2 },
            { angle: 85, number: 2 },
            { angle: 90, number: 3 },
            { angle: 95, number: 3 },
            { angle: 100, number: 3 },
            { angle: 105, number: 3 },
            { angle: 110, number: 3 },
            { angle: 115, number: 3 },
            { angle: 120, number: 3 },
            { angle: 125, number: 3 },
            { angle: 130, number: 3 },
            { angle: 135, number: 4 },
            { angle: 140, number: 4 },
            { angle: 145, number: 4 },
            { angle: 150, number: 4 },
            { angle: 155, number: 4 },
            { angle: 160, number: 4 },
            { angle: 165, number: 4 },
            { angle: 170, number: 4 },
            { angle: 175, number: 4 },
            { angle: 180, number: 5 },
            { angle: 185, number: 5 },
            { angle: 190, number: 5 },
            { angle: 195, number: 5 },
            { angle: 200, number: 5 },
            { angle: 205, number: 5 },
            { angle: 210, number: 5 },
            { angle:215 , number: 5 },
            { angle: 220, number: 5 },
            { angle: 225, number: 6 },
            { angle: 230, number: 6 },
            { angle: 235, number: 6 },
            { angle: 240, number: 6 },
            { angle: 245, number: 6 },
            { angle: 250, number: 6 },
            { angle: 255, number: 6 },
            { angle: 260, number: 6 },
            { angle: 265, number: 6 },
            { angle: 270, number: 7 },
            { angle: 275, number: 7 },
            { angle: 280, number: 7 },
            { angle: 285, number: 7 },
            { angle: 290, number: 7 },
            { angle: 295, number: 7 },
            { angle: 300, number: 7 },
            { angle: 305, number: 7 },
            { angle: 310, number: 7 },
            { angle: 315, number: 8},
            { angle: 320, number: 8},
            { angle: 325, number: 8},
            { angle: 330, number: 8},
            { angle: 335, number: 8},
            { angle: 340, number: 8},
            { angle: 345, number: 8},
            { angle: 350, number: 8},
            { angle: 355, number: 8},
            { angle: 360, number: 0},//zu 0 
            ];

        
        var result = angleToNumberMap.find(function(item) {
            return item.angle === rotation;
        });

        if (result) {
            console.log("The number at the top is: " + result.number);
            $("#win").html(result.number); // Update the text in the div with the number

            var winHref = numberwin.find(function(item) {
                return item.number === result.number;
            });

            if (winHref) {
                console.log("The href for the winning number is: " + winHref.href);
                // You can use the href as needed, for example, redirecting:
                setTimeout(function() {
					window.open(winHref.href, '_blank');

				}, 1500);
				
				
                // window.location.href = winHref.href;
            } else {
                console.log("No matching href found for the winning number.");
            }

        } else {
            console.log("No matching angle found in the map.");
        }

    }

    // Call findTopNumber after the rotation stops
    


    }); // Automatically stop the rotation after 5 seconds

    // Automatically stop the rotation after 5 seconds
    

</script>
