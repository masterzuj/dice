<script src="./jquery-3.7.1.min.js"></script>
<script>
    $(document).ready(function() {
       
    });
</script>
<svg id="vegas" width="400" height="400" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="100" r="95" fill="none" stroke="black" stroke-width="2" />
    <g font-family="Arial" font-size="24" text-anchor="middle" dominant-baseline="middle">
        <text x="100" y="180">7</text>
        <text x="45" y="155">6</text>
        <text x="20" y="100">5</text>
        <text x="45" y="45">4</text>
        <text x="100" y="20">3</text>
        <text x="155" y="45">2</text>
        <text x="180" y="100">1</text>
        <text x="155" y="155">8</text>
    </g>

</svg>

<div style="position: fixed; top: 160px; left: 200px; background-color: green; opacity: 0.3; width: 200px; height: 80px;"></div>


<div id="win" style="position: fixed; top: 160px; left: 180px; background-color: lightblue; opacity: 1; width: 50px; height: 80px; font-size: 80;">1</div>
<script>
    $(document).ready(function() {

        // Rotate the SVG disc
        var svg = $('svg');
        var angle = 0;
        var time = 0;

        function rotateDisc() {
            angle += 5; // Increment the rotation angle by a random number between 1 and 10
            svg.css('transform', 'rotate(' + angle + 'deg)');
            svg.css('transform-origin', '50% 50%'); // Set the rotation origin to the center
        
        
            console.log("Rotation angle: " + angle);

        }


    //$('#startButton').click(function() {
    $('#vegas').click(function() {
        angle = 0; // Reset the angle to 0 when the button is clicked
        svg.css('transform', 'rotate(0deg)'); // Reset the rotation of the SVG
        svg.css('transform-origin', '50% 50%'); // Set the rotation origin to the center

        //clearInterval(intervalId); // Clear any existing intervals to prevent multiple rotations

        var time = Math.floor(Math.random() * 5000);
        
        intervalId = setInterval(rotateDisc, 50); // Start the rotation again
        console.log("Rotation started for " + time + " milliseconds.");
        setTimeout(function() {
            clearInterval(intervalId);
            findTopNumber(angle);
            
        }, time); // Stop the rotation after 3 seconds

        console.log("Rotation stopped after " + time + " milliseconds.");

       
    });

    function findTopNumber(func_angle) {
        var rotation = func_angle % 360; // Get the current rotation angle
        
        console.log("Current rotation angle: " + rotation);
        //if (rotation < 0) rotation += 360; // Ensure the angle is positive

        var number = Math.round(rotation / 45); // Calculate the number based on the angle
        if (number < 0) number += 8; // Ensure the number is positive
        
        console.log("Current rotation angle: " + rotation);

        var angleToNumberMap = [
            { angle: 0, number: 1 },
            { angle: 5, number: 1 },
            { angle: 10, number: 1 },
            { angle: 15, number: 1 },
            { angle: 20, number: 1 },
            { angle: 25, number: 1 },
            { angle: 30, number: 1 },
            { angle: 35, number: 1 },
            { angle: 40, number: 2 },
            { angle: 45, number: 2 },
            { angle: 50, number: 2 },
            { angle: 55, number: 2 },
            { angle: 60, number: 2 },
            { angle: 65, number: 2 },
            { angle: 70, number: 2 },
            { angle: 75, number: 2 },
            { angle: 80, number: 3 },
            { angle: 85, number: 3 },
            { angle: 90, number: 3 },
            { angle: 95, number: 3 },
            { angle: 100, number: 3 },
            { angle: 105, number: 3 },
            { angle: 110, number: 3 },
            { angle: 115, number: 3 },
            { angle: 120, number: 4 },
            { angle: 125, number: 4 },
            { angle: 130, number: 4 },
            { angle: 135, number: 4 },
            { angle: 140, number: 4 },
            { angle: 145, number: 4 },
            { angle: 150, number: 4 },
            { angle: 155, number: 4 },
            { angle: 160, number: 5 },
            { angle: 165, number: 5 },
            { angle: 170, number: 5 },
            { angle: 175, number: 5 },
            { angle: 180, number: 5 },
            { angle: 185, number: 5 },
            { angle: 190, number: 5 },
            { angle: 195, number: 5 },
            { angle: 200, number: 6 },
            { angle: 205, number: 6 },
            { angle: 210, number: 6 },
            { angle:215 ,number :6},
            { angle: 220, number: 6 },
            { angle: 225, number: 6 },
            { angle: 230, number: 6 },
            { angle: 235, number: 6 },
            { angle: 240, number: 7 },
            { angle: 245, number: 7 },
            { angle: 250, number: 7 },
            { angle: 255, number: 7 },
            { angle: 260, number: 7 },
            { angle: 265, number: 7 },
            { angle: 270, number: 7 },
            { angle: 275, number: 7 },
            { angle: 280, number: 8 },
            { angle: 285, number: 8 },
            { angle: 290, number: 8 },
            { angle:295 ,number :8},
            { angle:300 ,number :8},
            { angle :305 ,number :8},
            { angle :310 ,number :8},
            { angle :315 ,number :8},
            { angle :320 ,number :1},
            { angle :325 ,number :1},
            { angle :330 ,number :1},
            { angle :335 ,number :1},
            { angle :340 ,number :1},
            { angle :345 ,number :1},
            { angle :350 ,number :1},
            { angle :355 ,number :1},
            { angle :360 ,number :1},// Wrap around to 1 at 0 degrees
            ];

        
        var result = angleToNumberMap.find(function(item) {
            return item.angle === rotation;
        });

        if (result) {
            console.log("The number at the top is: " + result.number);
            $("#win").html(result.number); // Update the text in the div with the number
        } else {
            console.log("No matching angle found in the map.");
        }

    }

    // Call findTopNumber after the rotation stops
    


    }); // Automatically stop the rotation after 5 seconds

    // Automatically stop the rotation after 5 seconds
    

</script>
